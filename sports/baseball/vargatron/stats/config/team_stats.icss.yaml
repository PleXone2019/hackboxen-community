---
namespace: sports.baseball.vargatron
protocol: team_stats
under_consideration: true

data_assets:
- name: team_stats_data_asset
  location: data/team_stats.json
  type: team_record

code_assets:
- name: team_stats_code
  location: code/team_stats_endpoint.rb

messages:
  search:
    response: es_response
    doc: Get a team's team_id, list of years played, W-L records, and more.
    request:
    - name: team_stats_search_request
      type: team_stats_search_request
    samples:
    - request:
      - team_name: Rangers

targets:

  catalog:
  - name: team_stats_catalog_entry
    title: Pennant Baseball History (1952-2010)
    description: |-
      
      Batter up! Enter an MLB team name and in return get its team_id and a list of the years played, between 1960-2010.

      Partner this API with the Pennant Baseball Seasons API and get back team statistics, records, and game_ids. Use game_ids with the Pennant Baseball Game Logs API to get full at-bat data.

    tags:
    - sports
    - baseball
    - stats
    - statistics
    messages:
    - search

  elastic_search:
  - index_name: sports.baseball.vargatron
    object_type: team_record
    id_field: team_id
    loader: json_loader
    data_assets:
    - team_stats_data_asset 
    
types:
- name: team_stats_search_request
  doc: Query API parameters for the team_record search message.
  type: record
  fields:
  - name: team_name
    type: string
    doc: A team's name or location.
  - name: _limit
    type: int
    doc: An integer limit to the number of pages returned.
  - name: _from
    type: int
    doc: Integer offset to start @results@ at. A multiple of 10.

- name: year_record
  type: record
  doc: A year record contains the year, the number of wins, the number of losses, and the league.
  fields:
  - name: season
    doc: The year for this season.
    type: int
  - name: wins
    doc: Number of wins this season.
    type: int
  - name: losses
    doc: Number of losses this season.
    type: int
  - name: division_series
    doc: PROD 1 if the team won its division series this year, 0 if not.
    type: int
  - name: league_rank
    doc: This team's ranking out of its league for this season.
    type: int
  - name: division_rank
    doc: This team's ranking out of its division for this season.
    type: int

- name: team_record
  type: record
  doc: A team record contains a team's id, colors, league, years played, and win-loss records for those years.
  fields:
  - name: team_id
    doc: Uppercase 3-letter team identifier. When a team moves, it gets a new id.
    type: string
  - name: team_location
    doc: The team location, generally a city or state.
    type: string
  - name: team_name 
    doc: The team's name.
    type: string
  - name: primary_color
    doc: The team's primary color's name.
    type: string
  - name: secondary_color
    doc: The team's secondary color's name.
    type: string
  - name: primary_color_hex
    doc: The team's primary color's hexadecimal code.
    type: string
  - name: secondary_color_hex
    doc: The team's secondary color's hexadecimal code.
    type: string
  - name: home_stadium
    doc: The team's home stadium during its most recent season. Previous stadiums can be found using the Pennant Baseball Seasons API.
    type: string
  - name: league
    doc: The team's two-letter uppercase league identifier for its most recent season.
    type: string
  - name: division
    doc: The team's one-letter uppercase division identifier for its most recent season.
    type: string
  - name: seasons
    doc: A list of all the years that the team played, with wins, losses, division series, division rank, and league rank for each year.
    type:
      type: array
      items: year_record
    
- name: es_response
  type: record
  doc: A json object containing the total number of records that matched the search as well as an array of @results@.
  fields:
    - name: total
      type: int
      doc: Total number of records that match @team_name@
    - name: results
      doc: A json array of team_records matching @team_name@
      type:
        type: array
        items: team_record
